@base_url = http://localhost:8000
@user_id = dev_001

# Nota: Para usar este arquivo, substitua 'http://localhost:8000' pela URL exposta se estiver testando remotamente.
# Exemplo: @base_url = https://8000-iixakx0mjyhxereoe7o6c-b08396e5.manusvm.computer

### Teste 1: Verificar Status da API
# Esperado: Status 200 OK, com "status": "online"
GET {{base_url}}/status
Accept: application/json

### Teste 2: Iniciar Conversa (Primeira Mensagem)
# Este teste deve criar uma nova sessão de chat para o {{user_id}}.
# Esperado: Status 200 OK, com a resposta da IA e "history_length": 2
POST {{base_url}}/chat
Content-Type: application/json

{
  "user_id": "{{user_id}}",
  "message": "Quais são os principais benefícios de usar o Pydantic no FastAPI?"
}

### Teste 3: Continuar Conversa (Manter Contexto)
# Este teste deve usar o histórico da sessão anterior.
# A resposta deve fazer referência ao Pydantic.
# Esperado: Status 200 OK, com a resposta da IA e "history_length": 4
POST {{base_url}}/chat
Content-Type: application/json

{
  "user_id": "{{user_id}}",
  "message": "E como eu defino um campo opcional em um BaseModel?"
}

### Teste 4: Limpar Histórico de Conversa
# Este teste deve deletar a sessão de chat do {{user_id}}.
# Esperado: Status 200 OK, com mensagem de sucesso.
DELETE {{base_url}}/chat/{{user_id}}
Accept: application/json

### Teste 5: Iniciar Nova Conversa (Após Limpeza)
# Este teste deve iniciar uma nova sessão, sem o contexto anterior.
# Esperado: Status 200 OK, com a resposta da IA e "history_length": 2
POST {{base_url}}/chat
Content-Type: application/json

{
  "user_id": "{{user_id}}",
  "message": "O que é o Uvicorn?"
}

### Teste 6: Tentar Limpar Histórico Inexistente
# Esperado: Status 404 Not Found
DELETE {{base_url}}/chat/usuario_inexistente
Accept: application/json
